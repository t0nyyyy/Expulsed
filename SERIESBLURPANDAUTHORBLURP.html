<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Integrated Panel Preview (Cleaned)</title>
    <link href="https://fonts.googleapis.com/css2?family=Electrolize&family=Courier+New&display=swap" rel="stylesheet">
    <style>
        /* Styles for this preview page body - NOT for integration */
        body {
            background-color: #000;
            color: #99ff99;
            font-family: 'Electrolize', monospace;
            margin: 0;
            padding: 30px 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            min-height: 100vh;
            box-sizing: border-box;
            overflow-x: hidden;
        }

        /* Mimicking your site's #movable-text-container for preview */
        #movable-text-container {
            width: 95%;
            max-width: 900px;
            margin-top: 15px;
        }
        
        /* --- START OF CSS TO INTEGRATE --- */
        .typing-cursor {
            display: inline-block;
            background-color: #00ff00;
            width: 8px;
            height: 1em;
            animation: blink-cursor 0.7s infinite;
            margin-left: 2px;
            vertical-align: baseline;
        }

        @keyframes blink-cursor {
            50% { opacity: 0; }
        }

        .info-panel {
            background-color: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(0, 255, 0, 0.4);
            border-radius: 4px;
            padding: 20px;
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 25px;
            text-align: left;
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1.4s cubic-bezier(0.25, 0.1, 0.25, 1), transform 1.4s cubic-bezier(0.25, 0.1, 0.25, 1);
            position: relative;
            overflow: hidden;
            max-width: 100%;
        }

        .info-panel.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .panel-title {
            font-family: 'Electrolize', monospace;
            color: #00ff00;
            font-size: 2em;
            text-align: center;
            text-transform: uppercase;
            border-bottom: 1px solid rgba(0, 255, 0, 0.3);
            padding-top: 10px;
            padding-bottom: 10px;
            margin-top: 0;
            margin-bottom: 18px;
            letter-spacing: 1.2px;
            min-height: 1.25em;
            overflow: hidden;
            width: 100%;
            box-sizing: border-box;
        }

        .panel-content p {
            font-size: 0.95em;
            line-height: 1.6;
            margin-bottom: 1.1em;
        }

        #movable-text-container .panel-content a.neon-link {
            color: #00ff00;
            text-decoration: none;
            text-shadow: 0 0 4px #00ff00, 0 0 8px #00ff00;
            font-weight: bold;
        }
        #movable-text-container .panel-content a.neon-link:hover {
            color: #c0ffc0;
            text-shadow: 0 0 6px #c0ffc0, 0 0 12px #c0ffc0;
        }

        #movable-text-container .panel-content .tech-highlight {
            background-color: rgba(0, 255, 0, 0.18);
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: bold;
        }
        #movable-text-container .panel-content mark {
            background-color: rgba(0, 255, 0, 0.55);
            color: #000;
            padding: 1px 3px;
        }

        #movable-text-container .keyword {
            transition: filter 0.4s ease-in-out;
        }
        #movable-text-container .keyword.active-pulse {
            animation: subtle-pulse-animation 1.5s infinite alternate ease-in-out;
        }
        @keyframes subtle-pulse-animation {
            0% { filter: brightness(100%) drop-shadow(0 0 0px rgba(0,255,0,0)); }
            100% { filter: brightness(130%) drop-shadow(0 0 3px rgba(80,255,80,0.5)); }
        }

        .info-panel.wave-active::before {
            content: "";
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(
                110deg,
                rgba(0, 255, 0, 0) 30%,
                rgba(0, 255, 0, 0.10) 45%,
                rgba(0, 255, 0, 0.13) 55%,
                rgba(0, 255, 0, 0) 70%
            );
            opacity: 0;
            transition: opacity 0.5s ease-in 0.2s;
            z-index: 0;
            animation: bg-wave-animation 4s linear infinite;
        }
        .info-panel.visible.wave-active::before {
            opacity: 1;
        }
        @keyframes bg-wave-animation {
            0% { transform: translateX(0%) skewX(-20deg); }
            100% { transform: translateX(200%) skewX(-20deg); }
        }

        .info-panel.breathing-active {
            animation: breathing-border-animation 1.5s infinite alternate ease-in-out;
        }
        @keyframes breathing-border-animation {
            0% { box-shadow: 0 0 4px rgba(0,255,0,0.3), inset 0 0 2px rgba(0,255,0,0.1); border-color: rgba(0, 255, 0, 0.4);}
            100% { box-shadow: 0 0 12px rgba(0,255,0,0.7), inset 0 0 6px rgba(0,255,0,0.4); border-color: rgba(80, 255, 80, 0.7);}
        }
        /* --- END OF CSS TO INTEGRATE --- */
    </style>
</head>
<body>

    <section id="movable-text-container">
        <div class="text-content">
            
            <div class="info-panel" id="series-blurb-panel">
                <h3 class="panel-title" id="title-target-1"></h3>
                <div class="panel-content">
                    <p>In a solar system carved up by <mark class="keyword">untouchable conglomerates</mark>, Pepe’s just a young dreamer stuck with a name he didn’t ask for. Armed with nothing more than reckless hope, he taunts the cosmos—a lone flicker against the galaxy’s cold, titan glare. Young, naive, impulsive, and as lucky as he is unlucky, Pepe is chasing a way out of Earth’s <span class="tech-highlight keyword">AI-saturated grind</span>. His first stop: a grimy lunar outpost, where miners toil on the regolith for capital-focused overlords who don’t give a damn.</p>
                    <p>From lawless havens where outcasts shape their own rules to the cold grip of corporate power, Expulsed is a raw, grounded sci-fi saga that asks, what’s a nobody got to do to make it in a universe that doesn’t care? Thrust into a saga that cuts deep, blending heart, humour, and a fierce warning about the world we’re building—one misstep at a time. <a href="#" class="neon-link keyword">Explore the series</a>.</p>
                </div>
            </div>

            <div class="info-panel" id="author-bio-panel">
                <h3 class="panel-title" id="title-target-2"></h3>
                <div class="panel-content">
                    <p>D.B. Humber’s been building stories since he was a kid stacking Legos, now crafting sci-fi that <mark class="keyword">feels as real as tomorrow</mark>. Years as a video editor honed his knack for cinematic narratives, his eye for pacing fuelling tales of <span class="tech-highlight keyword">plausible futures</span>.</p>
                    <p>A brief stint in the mob (Royal Navy) as a communications operator left him with a soft spot for the tech that powers his what-ifs. When the world paused pre-pandemic, he traded his love of piloting Orcas in Elite Dangerous, started writing, and hasn’t looked back. An everyman with a futurist’s eye, he’s co-written sci-fi shorts, but novels are where his heart lies. Warm, a touch sarcastic, and always welcoming, D.B. Humber opens his universe to you, one star at a time.</p>
                </div>
            </div>

        </div>
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- START OF JAVASCRIPT TO INTEGRATE ---
            const panel1TitleText = "THE EXPULSED SAGA";
            const panel2TitleText = "BEHIND THE TRANSMISSION";
            
            const seriesBlurbPanel = document.getElementById('series-blurb-panel');
            const authorBioPanel = document.getElementById('author-bio-panel');
            const allInfoPanels = [];
            if (seriesBlurbPanel) allInfoPanels.push(seriesBlurbPanel);
            if (authorBioPanel) allInfoPanels.push(authorBioPanel);

            const panelsData = [];
            if (seriesBlurbPanel && document.getElementById('title-target-1')) {
                panelsData.push({ 
                    element: seriesBlurbPanel, 
                    titleElement: document.getElementById('title-target-1'), 
                    titleText: panel1TitleText 
                });
            }
            if (authorBioPanel && document.getElementById('title-target-2')) {
                panelsData.push({
                    element: authorBioPanel,
                    titleElement: document.getElementById('title-target-2'),
                    titleText: panel2TitleText
                });
            }
            
            let typeTimeout;
            let keywordHoverListeners = [];

            function typeOut(element, html, speed = 75, addCursor = true) {
                return new Promise((resolve) => {
                    if (!element) { resolve(); return; }
                    element.innerHTML = ''; 
                    let i = 0; 
                    let currentText = ''; 
                    let cursorSpan = null;
                    if (addCursor) { 
                        cursorSpan = document.createElement('span'); 
                        cursorSpan.className = 'typing-cursor'; 
                    }
                    function typeCharacter() {
                        if (i < html.length) {
                            if (i === 0 && addCursor && cursorSpan && element) element.appendChild(cursorSpan);
                            currentText += html[i]; 
                            let displayContent = currentText;
                            if (addCursor && cursorSpan && element) { 
                                if(element.contains(cursorSpan)) element.removeChild(cursorSpan); 
                                element.innerHTML = displayContent; 
                                element.appendChild(cursorSpan);
                            } else if (element) { 
                                element.innerHTML = displayContent; 
                            }
                            i++; 
                            typeTimeout = setTimeout(typeCharacter, speed);
                        } else { 
                            if (addCursor && cursorSpan && element && element.contains(cursorSpan)) element.removeChild(cursorSpan); 
                            resolve(); 
                        }
                    }
                    typeCharacter();
                });
            }

            function activateKeywordPulse() {
                keywordHoverListeners.forEach(item => item.element.removeEventListener(item.type, item.listener)); 
                keywordHoverListeners = [];
                const container = document.getElementById('movable-text-container') || document;
                const allKeywords = container.querySelectorAll('.keyword');
                allKeywords.forEach(kw => {
                    const mouseoverListener = () => kw.classList.add('active-pulse');
                    const mouseoutListener = () => kw.classList.remove('active-pulse');
                    kw.addEventListener('mouseover', mouseoverListener); 
                    kw.addEventListener('mouseout', mouseoutListener);
                    keywordHoverListeners.push({element: kw, type: 'mouseover', listener: mouseoverListener});
                    keywordHoverListeners.push({element: kw, type: 'mouseout', listener: mouseoutListener});
                });
            }

            function initPageAnimations() {
                if (panelsData.length > 0) {
                    panelsData.forEach((data, index) => {
                        setTimeout(() => {
                            if (data.element) {
                                data.element.classList.add('visible');
                                data.element.classList.add('wave-active');
                            }
                            if (data.titleElement) {
                                setTimeout(() => {
                                    typeOut(data.titleElement, data.titleText, 75, true);
                                }, 150); 
                            }
                        }, index * 600);
                    });
                }

                activateKeywordPulse();

                if (allInfoPanels.length > 0) {
                    allInfoPanels.forEach(panel => {
                        panel.addEventListener('mouseenter', () => panel.classList.add('breathing-active'));
                        panel.addEventListener('mouseleave', () => panel.classList.remove('breathing-active'));
                    });
                }
            }
            
            initPageAnimations();
            // --- END OF JAVASCRIPT TO INTEGRATE ---
        });
    </script>
</body>
</html>